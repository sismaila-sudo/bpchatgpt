================================================================================
                     DOCUMENTATION TECHNIQUE DU PROJET
                        GÃ‰NÃ‰RATEUR DE BUSINESS PLAN
================================================================================

ğŸ¯ DESCRIPTION DU PROJET
========================
Application web complÃ¨te de gÃ©nÃ©ration de business plans avec templates
sectoriels, calculs financiers automatisÃ©s, et gÃ©nÃ©ration IA de contenu.

ğŸ“Š ARCHITECTURE GÃ‰NÃ‰RALE
========================
- Frontend: Next.js 15 + React 19 + TypeScript + Tailwind CSS
- Backend: Fastify + TypeScript
- Base de donnÃ©es: Supabase (PostgreSQL) avec Row Level Security
- IA: Google Gemini API pour gÃ©nÃ©ration de contenu
- Authentification: Supabase Auth
- Stockage fichiers: Supabase Storage
- UI Components: Radix UI + shadcn/ui

ğŸ—‚ï¸ STRUCTURE DU PROJET
======================

BPCHATGPT/
â”‚
â”œâ”€â”€ frontend/                          # Application Next.js
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                       # App Router Next.js 15
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                  # Pages d'authentification
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login/page.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register/page.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password/page.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth-code-error/page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ projects/              # Gestion des projets
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx           # Liste des projets
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ new/page.tsx       # CrÃ©ation projet avec templates
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/page.tsx      # DÃ©tail projet + Ã©diteur
â”‚   â”‚   â”‚   â”œâ”€â”€ profile/page.tsx       # Profil utilisateur
â”‚   â”‚   â”‚   â”œâ”€â”€ import/page.tsx        # Import donnÃ©es Excel
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx             # Layout principal
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx               # Page d'accueil
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/                # Composants React
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/                    # Composants UI de base
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx         # Bouton avec variants
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx           # Cartes
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx          # Champs de saisie
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dialog.tsx         # Modales (Radix UI)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ alert-dialog.tsx   # Confirmations
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ radio-group.tsx    # Boutons radio
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ badge.tsx          # Badges
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ label.tsx          # Labels
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ textarea.tsx       # Zones de texte
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ project/               # Composants spÃ©cifiques projets
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tabs/              # Onglets du projet
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BusinessPlanTab.tsx    # Vue document final
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SectionsTab.tsx        # Gestion sections
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FinancialTab.tsx       # Calculs financiers
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ExportTab.tsx          # Export PDF/Word
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SectionImageManager.tsx    # Gestion images sections
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SectionEditor.tsx          # Ã‰diteur de sections
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FinancialCalculations.tsx  # Calculateur financier
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ layout/                # Composants de mise en page
â”‚   â”‚   â”‚       â”œâ”€â”€ Header.tsx         # En-tÃªte application
â”‚   â”‚   â”‚       â”œâ”€â”€ Sidebar.tsx        # Barre latÃ©rale
â”‚   â”‚   â”‚       â””â”€â”€ Footer.tsx         # Pied de page
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ hooks/                     # Hooks React personnalisÃ©s
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts             # Gestion authentification
â”‚   â”‚   â”‚   â”œâ”€â”€ useProjects.ts         # Gestion projets
â”‚   â”‚   â”‚   â””â”€â”€ useDashboardStats.ts   # Statistiques dashboard
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ lib/                       # Utilitaires et configuration
â”‚   â”‚   â”‚   â”œâ”€â”€ supabase/              # Configuration Supabase
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts          # Client cÃ´tÃ© navigateur
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ server.ts          # Client cÃ´tÃ© serveur
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ utils.ts               # Utilitaires gÃ©nÃ©raux (cn, etc.)
â”‚   â”‚   â”‚   â””â”€â”€ constants.ts           # Constantes application
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                  # Services mÃ©tier
â”‚   â”‚   â”‚   â”œâ”€â”€ documentTemplateService.ts     # NOUVEAU: Gestion templates
â”‚   â”‚   â”‚   â”œâ”€â”€ financialService.ts            # Calculs financiers
â”‚   â”‚   â”‚   â”œâ”€â”€ aiService.ts                   # IntÃ©gration Gemini AI
â”‚   â”‚   â”‚   â”œâ”€â”€ pdfExport.ts                   # Export PDF
â”‚   â”‚   â”‚   â””â”€â”€ excelImport.ts                 # Import Excel
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ types/                     # Types TypeScript
â”‚   â”‚       â”œâ”€â”€ database.ts            # Types base de donnÃ©es
â”‚   â”‚       â”œâ”€â”€ financial.ts           # Types financiers
â”‚   â”‚       â””â”€â”€ project.ts             # Types projets
â”‚   â”‚
â”‚   â”œâ”€â”€ .env.local                     # Variables d'environnement
â”‚   â”œâ”€â”€ package.json                   # DÃ©pendances frontend
â”‚   â”œâ”€â”€ next.config.js                 # Configuration Next.js
â”‚   â”œâ”€â”€ tailwind.config.js             # Configuration Tailwind
â”‚   â””â”€â”€ tsconfig.json                  # Configuration TypeScript
â”‚
â”œâ”€â”€ backend/                           # API Fastify
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/                    # Routes API
â”‚   â”‚   â”‚   â”œâ”€â”€ projects.ts            # CRUD projets
â”‚   â”‚   â”‚   â”œâ”€â”€ financial.ts           # Calculs financiers
â”‚   â”‚   â”‚   â”œâ”€â”€ ai.ts                  # GÃ©nÃ©ration IA
â”‚   â”‚   â”‚   â””â”€â”€ templates.ts           # NOUVEAU: API templates
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                  # Services backend
â”‚   â”‚   â”‚   â”œâ”€â”€ projectService.ts      # Logique mÃ©tier projets
â”‚   â”‚   â”‚   â”œâ”€â”€ financialService.ts    # Moteur de calcul
â”‚   â”‚   â”‚   â”œâ”€â”€ aiService.ts           # Service IA
â”‚   â”‚   â”‚   â””â”€â”€ templateService.ts     # NOUVEAU: Service templates
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                     # Utilitaires backend
â”‚   â”‚   â”‚   â”œâ”€â”€ database.ts            # Connexion Supabase
â”‚   â”‚   â”‚   â””â”€â”€ logger.ts              # SystÃ¨me de logs
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ index.ts                   # Point d'entrÃ©e serveur
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json                   # DÃ©pendances backend
â”‚   â””â”€â”€ tsconfig.json                  # Configuration TypeScript
â”‚
â”œâ”€â”€ database/                          # Scripts base de donnÃ©es
â”‚   â”œâ”€â”€ setup-templates.sql            # NOUVEAU: SchÃ©ma templates
â”‚   â”œâ”€â”€ initial-schema.sql             # SchÃ©ma principal
â”‚   â””â”€â”€ seed-data.sql                  # DonnÃ©es de test
â”‚
â””â”€â”€ docs/                             # Documentation
    â”œâ”€â”€ API.md                        # Documentation API
    â”œâ”€â”€ TEMPLATES.md                  # NOUVEAU: Guide templates
    â””â”€â”€ DEPLOYMENT.md                 # Guide dÃ©ploiement

ğŸ”§ TECHNOLOGIES UTILISÃ‰ES
=========================

Frontend:
---------
- Next.js 15.5.3 (App Router)
- React 19.1.0 + React DOM 19.1.0
- TypeScript 5.x
- Tailwind CSS 4.x + PostCSS
- Radix UI (composants accessibles)
- shadcn/ui (systÃ¨me de design)
- Zustand (Ã©tat global)
- React Query (@tanstack/react-query)
- React Hook Form + Zod (formulaires)
- Lucide React (icÃ´nes)
- html2canvas + jsPDF (export PDF)
- xlsx (import/export Excel)
- date-fns (manipulation dates)
- sonner (notifications toast)

Backend:
--------
- Fastify (serveur HTTP rapide)
- TypeScript
- tsx (exÃ©cution TypeScript)

Base de donnÃ©es:
---------------
- Supabase (PostgreSQL hÃ©bergÃ©)
- Row Level Security (RLS)
- Supabase Storage (fichiers)
- Supabase Auth (authentification)

IA et Services:
--------------
- Google Gemini AI (@google/generative-ai)
- Supabase Client (@supabase/supabase-js)
- Supabase SSR (@supabase/ssr)

ğŸ—„ï¸ SCHÃ‰MA BASE DE DONNÃ‰ES
=========================

Tables principales:
------------------
- organizations          # Organisations/entreprises
- projects               # Projets de business plan
- project_collaborators  # Collaborateurs projets
- project_sections       # Sections des business plans
- products               # Produits/services
- sales_projections      # Projections de ventes
- opex_items            # DÃ©penses opÃ©rationnelles
- capex_items           # Investissements

Tables templates (NOUVELLES):
----------------------------
- document_templates     # Templates de documents
- template_sections      # Sections des templates
- section_images        # Images des sections
- company_history       # Historique entreprises

Tables financiÃ¨res:
------------------
- financial_projections # Projections financiÃ¨res
- cash_flow_statements  # Tableaux de trÃ©sorerie
- profit_loss_statements # Comptes de rÃ©sultat

ğŸš€ SERVEURS ET PORTS
===================

Configuration actuelle:
- Frontend: http://localhost:3007
- Backend:  http://localhost:3008
- Supabase: https://nddimpfyofoopjnroswf.supabase.co

Variables d'environnement (.env.local):
- NEXT_PUBLIC_SUPABASE_URL=https://nddimpfyofoopjnroswf.supabase.co
- NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIs...
- NEXT_PUBLIC_API_URL=http://localhost:3008
- NEXT_PUBLIC_GEMINI_API_KEY=AIzaSyDo8UorLKcMXR_...

ğŸ¨ SYSTÃˆME DE TEMPLATES (NOUVEAU)
=================================

FonctionnalitÃ©s:
- Templates sectoriels (agriculture, tech, commerce, etc.)
- Sections prÃ©dÃ©finies avec icÃ´nes et couleurs
- Gestion d'images par section
- Mode "nouvelle entreprise" vs "entreprise existante"
- GÃ©nÃ©ration IA contextuelle par section
- Export PDF avec templates

Types de templates:
- Business Plan Standard
- Agriculture & Ã‰levage
- Technologie & Innovation
- Commerce & Distribution
- Services & Consulting

Structure template:
- MÃ©tadonnÃ©es (nom, secteur, description)
- Sections configurables (titre, type, ordre)
- Images associÃ©es (inline, pleine largeur, cÃ´tÃ©)
- Historique entreprise (pour templates existants)

âš™ï¸ FONCTIONNALITÃ‰S CLÃ‰S
========================

Gestion de projets:
- CrÃ©ation multi-Ã©tapes avec templates
- Collaboration multi-utilisateurs
- Secteurs prÃ©dÃ©finis
- Horizons temporels (3-7 ans)

Ã‰dition de contenu:
- Ã‰diteur de sections par template
- GÃ©nÃ©ration IA de contenu Gemini
- Gestion d'images par section
- Validation progressive

Calculs financiers:
- Projections de ventes automatiques
- OPEX/CAPEX avec amortissements
- Compte de rÃ©sultat prÃ©visionnel
- Tableaux de trÃ©sorerie
- Ratios financiers

Import/Export:
- Import donnÃ©es Excel (produits, projections)
- Export PDF professionnel avec templates
- Export Excel des donnÃ©es financiÃ¨res

ğŸ” AUTHENTIFICATION & SÃ‰CURITÃ‰
==============================

- Supabase Auth (email/password)
- Row Level Security (RLS) sur toutes les tables
- Gestion des rÃ´les utilisateurs
- Sessions sÃ©curisÃ©es cÃ´tÃ© serveur
- Validation des permissions par route

ğŸ“‹ COMMANDES DE DÃ‰VELOPPEMENT
=============================

Frontend:
cd frontend
npm install
npm run dev          # DÃ©veloppement (port 3007)
npm run build        # Build production
npm run start        # Serveur production
npm run lint         # VÃ©rification code

Backend:
cd backend
npm install
npm run dev          # DÃ©veloppement (port 3008)
npm run build        # Compilation TypeScript
npm run start        # Serveur production

Base de donnÃ©es:
psql -d postgresql://[url] -f database/setup-templates.sql

ğŸ› PROBLÃˆMES RÃ‰SOLUS RÃ‰CEMMENT
==============================

1. Runtime Error BusinessPlanTab.tsx
   - Mappings d'icÃ´nes manquants pour nouveaux types sections
   - Solution: Ajout de 40+ mappings complets

2. Composants UI manquants
   - radio-group, dialog, alert-dialog, buttonVariants
   - Solution: CrÃ©ation composants Radix UI + export

3. DÃ©pendances manquantes
   - sonner, SidebarRight (inexistant)
   - Solution: Installation + remplacement par PanelRight

4. Cache Next.js corrompu
   - routes-manifest.json manquant
   - Solution: Nettoyage .next + redÃ©marrage serveur

ğŸ“ˆ Ã‰TAT ACTUEL
==============

âœ… Frontend: Fonctionnel avec systÃ¨me templates intÃ©grÃ©
âœ… Backend: API complÃ¨te avec endpoints templates
âœ… Base de donnÃ©es: SchÃ©ma complet avec templates
âœ… Build: Compilation rÃ©ussie (dev + production)
âœ… Tests: Serveurs opÃ©rationnels et communicants

âš ï¸ Points d'attention:
- ESLint warnings mineurs (types any, quotes)
- Multiples serveurs en arriÃ¨re-plan (nettoyage recommandÃ©)
- Templates systÃ¨me en dÃ©veloppement (5 templates base)

ğŸš€ PROCHAINES Ã‰TAPES SUGGÃ‰RÃ‰ES
==============================

1. Tests complets interface utilisateur
2. CrÃ©ation de templates sectoriels supplÃ©mentaires
3. Optimisation des calculs financiers
4. AmÃ©lioration gÃ©nÃ©ration IA contextuelle
5. Tests de charge et optimisation performances
6. Documentation utilisateur finale

================================================================================
                              FIN DE DOCUMENTATION
================================================================================

ğŸ“ CONTACT DÃ‰VELOPPEUR
======================
Ce projet a Ã©tÃ© configurÃ© et debuggÃ© par Claude Code.
DerniÃ¨re mise Ã  jour: 18 septembre 2025
Version: 1.2.0 (avec systÃ¨me templates)

Pour questions techniques, se rÃ©fÃ©rer aux fichiers de configuration
et aux commentaires dans le code source.